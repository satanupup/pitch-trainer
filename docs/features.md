# Pitch Trainer 功能特色

本文檔詳細說明 Pitch Trainer 應用程式的核心功能和特色。

## 目錄

- [音訊處理功能](#音訊處理功能)
- [歌唱練習功能](#歌唱練習功能)
- [AI 分析功能](#ai-分析功能)
- [用戶界面功能](#用戶界面功能)
- [系統功能](#系統功能)
- [進階功能](#進階功能)

## 音訊處理功能

### 1. 人聲分離

使用 Spleeter AI 模型將原始歌曲分離成人聲和伴奏兩個獨立的音軌。

**技術細節**:
- 使用 Deezer 的 Spleeter 預訓練模型
- 支援 2 聲道和 4 聲道分離模式
- 處理格式: MP3, WAV, FLAC, OGG
- 輸出格式: 高品質 MP3 (320kbps)

**使用場景**:
- 卡拉 OK 練習 (僅播放伴奏)
- 歌唱技巧學習 (僅聆聽人聲)
- 混音創作 (分別處理人聲和伴奏)

### 2. 旋律提取

使用 Basic Pitch 從人聲中提取 MIDI 旋律，用於音準分析和視覺化。

**技術細節**:
- 使用 Spotify 的 Basic Pitch 神經網絡模型
- 輸出標準 MIDI 檔案 (.mid)
- 包含音高、時間和力度資訊
- 支援多音符檢測和音高彎曲

**使用場景**:
- 生成音符軌道供用戶跟唱
- 分析原唱的音高變化和技巧
- 提供音準比較的基準

### 3. 歌詞生成與同步

使用 AI 語音識別技術從人聲中生成帶時間戳的 LRC 歌詞檔。

**技術細節**:
- 主要使用 OpenAI Whisper 模型
- 備用方案: Google Speech-to-Text API
- 支援多語言識別 (中文、英文、日文等)
- 輸出標準 LRC 格式，包含毫秒級時間戳

**使用場景**:
- 歌唱時顯示同步歌詞
- 學習發音和咬字
- 輔助記憶歌詞內容

### 4. 音調調整

允許用戶調整歌曲的音調，以適應個人聲域。

**技術細節**:
- 支援 -10 到 +10 半音的調整範圍
- 使用高品質音調轉換算法
- 同時調整人聲、伴奏和 MIDI 音高
- 實時處理，無需等待

**使用場景**:
- 調整歌曲以適應個人聲域
- 練習不同音調的演唱技巧
- 比較不同音調下的演唱難度

## 歌唱練習功能

### 1. 即時音高偵測

使用 Web Audio API 實時分析麥克風輸入的音高。

**技術細節**:
- 使用自動相關函數 (ACF) 算法
- 採樣率: 44.1kHz
- 分析窗口: 30ms
- 更新頻率: 60Hz (16.7ms)
- 音高範圍: C2-C6 (65.4Hz - 1046.5Hz)

**使用場景**:
- 即時顯示用戶演唱的音高
- 與目標音高比較計算準確度
- 提供視覺反饋幫助調整音準

### 2. 音符軌道視覺化

在 Canvas 上繪製音符軌道和播放進度，提供直觀的視覺引導。

**技術細節**:
- 使用 HTML5 Canvas API
- 平滑滾動的音符軌道
- 色彩編碼的音準反饋
- 支援不同顯示模式 (鋼琴卷軸/音高曲線)
- 自適應不同螢幕尺寸

**使用場景**:
- 提供視覺引導幫助用戶跟唱
- 直觀顯示歌曲的音高變化
- 即時顯示演唱準確度

### 3. 音準評分系統

根據用戶演唱的音準與目標音高的匹配度進行評分。

**技術細節**:
- 音高偏差容忍度: ±25 cents (可調整)
- 評分指標: 準確度百分比、連續正確音符數、平均偏差
- 評分等級: S/A/B/C/D (根據準確度劃分)
- 支援分段評分和整體評分

**使用場景**:
- 提供客觀的演唱表現評估
- 追蹤練習進度和改進
- 增加遊戲化元素提高練習動力

### 4. 歌詞同步顯示

根據播放進度即時顯示當前演唱的歌詞。

**技術細節**:
- 支援 LRC 格式歌詞
- 毫秒級同步精度
- 卡拉OK風格的歌詞高亮
- 支援多行顯示和滾動

**使用場景**:
- 輔助用戶記憶和跟唱歌詞
- 提供視覺引導改善節奏感
- 增強沉浸式練習體驗

## AI 分析功能

### 1. 聲音品質分析

使用 Praat-Parselmouth 分析用戶的聲音品質參數。

![聲音品質分析示例](../public/assets/voice-quality-analysis.png)

**技術細節**:
- 分析參數: 音色、穩定度、共鳴、氣息控制
- 使用 Praat 聲學分析引擎
- 分析指標: 泛音比例、音高穩定度、共振峰分布、氣流控制
- 生成詳細的 JSON 分析報告

**使用場景**:
- 提供專業的聲音品質評估
- 識別需要改進的聲音特質
- 追蹤聲音品質的長期變化

### 2. 歌詞優化

使用 Gemini AI 優化從語音識別生成的原始歌詞。

**技術細節**:
- 使用 Google Gemini API
- 自動修正常見錯誤和標點符號
- 優化歌詞格式和結構
- 支援多語言歌詞處理

**使用場景**:
- 提高自動生成歌詞的準確度
- 修正語音識別的常見錯誤
- 改善歌詞的可讀性和格式

### 3. 智能教練反饋

基於用戶的演唱表現提供個性化的改進建議。

![智能教練反饋示例](../public/assets/ai-coach-feedback.gif)

**智能教練反饋範例**:

> "分析結果顯示您在副歌部分（1:45-2:10）的音準偏低約 30 音分，且音高不穩定。
> 
> **教練建議**：
> 1. 演唱高音時，嘗試從橫膈膜提供更穩定的氣息支撐，保持喉嚨放鬆
> 2. 練習時可將這段放慢 20%，專注於每個音符的準確度
> 3. 建議進行 5-10 分鐘的哼鳴練習（humming）來增強音高感知
> 
> 您的聲音共鳴良好，但可以嘗試更開放的口腔姿勢來增強高頻泛音。"

**技術細節**:
- 基於 AI 分析結果生成個性化建議
- 結合專業聲樂教學知識
- 提供具體、可操作的改進方法
- 根據用戶進步調整建議難度

## 用戶界面功能

### 1. 響應式設計

適應不同設備和螢幕尺寸的用戶界面。

**技術細節**:
- 使用 CSS Grid 和 Flexbox
- 媒體查詢適配不同螢幕尺寸
- 觸控友好的操作界面
- 支援橫屏和豎屏模式

**使用場景**:
- 在桌面電腦上進行深度練習
- 在平板上進行便攜練習
- 在手機上進行快速練習

### 2. 主題切換

支援明亮和暗黑兩種主題模式。

**技術細節**:
- 使用 CSS 變數實現主題切換
- 支援系統主題自動適配
- 用戶偏好記憶功能
- 平滑的主題切換動畫

**使用場景**:
- 適應不同光線環境
- 減少夜間使用的眼睛疲勞
- 提供個性化的視覺體驗

### 3. 多語言界面

支援多種語言的用戶界面。

**技術細節**:
- 支援語言: 中文、英文、日文
- 使用 i18n 國際化框架
- 語言資源文件分離
- 支援動態切換語言

**使用場景**:
- 服務不同語言背景的用戶
- 提供母語使用體驗
- 輔助語言學習

## 系統功能

### 1. 非同步處理

使用任務佇列模式處理長時間運行的任務。

**技術細節**:
- 基於資料庫的任務佇列
- 任務狀態追蹤和進度報告
- 失敗任務自動重試機制
- 任務優先級管理

**使用場景**:
- 處理大型音訊文件
- 執行 CPU 密集型 AI 分析
- 提供平滑的用戶體驗

### 2. 檔案管理

自動整理和轉換上傳的音訊檔案。

**技術細節**:
- 支援格式: MP3, WAV, FLAC, OGG, M4A
- 自動格式轉換和標準化
- 檔案命名規範化
- 定期清理臨時檔案

**使用場景**:
- 處理各種來源的音訊檔案
- 確保系統兼容性
- 優化儲存空間使用

### 3. 錯誤處理

全面的錯誤處理和用戶友好的錯誤提示。

**技術細節**:
- 分層錯誤處理架構
- 詳細的錯誤日誌記錄
- 用戶友好的錯誤訊息
- 自動錯誤報告機制

**使用場景**:
- 處理網絡連接問題
- 處理檔案格式不兼容
- 處理系統資源限制

### 4. 效能監控

即時監控系統效能和資源使用。

**技術細節**:
- 監控 API 響應時間
- 追蹤資源使用 (CPU, 記憶體, 磁碟)
- 記錄處理任務的執行時間
- 生成效能報告和圖表

**使用場景**:
- 識別系統瓶頸
- 優化資源分配
- 提高系統穩定性

## 進階功能

### 1. 批量處理

支援多個檔案的批量上傳和處理。

**技術細節**:
- 支援多檔案選擇和拖放上傳
- 並行處理多個任務
- 批量進度追蹤
- 智能任務排程

**使用場景**:
- 處理整個專輯或播放清單
- 批量準備練習材料
- 節省手動操作時間

### 2. 歌曲搜索和過濾

基於多種條件搜索和過濾歌曲庫。

**技術細節**:
- 支援全文搜索
- 多條件過濾 (歌手、語言、風格等)
- 排序選項 (上傳時間、名稱、難度等)
- 搜索結果分頁

**使用場景**:
- 快速找到特定歌曲
- 按難度或風格篩選練習材料
- 探索新的練習內容

### 3. 練習數據分析

追蹤和分析用戶的練習數據和進步。

**技術細節**:
- 記錄練習時間和頻率
- 追蹤評分和表現變化
- 生成進步報告和圖表
- 識別優勢和弱點

**使用場景**:
- 追蹤長期練習效果
- 識別需要改進的領域
- 提供數據驅動的練習建議

### 4. 離線支持

支援在無網絡連接時使用核心功能。

**技術細節**:
- 使用 Progressive Web App (PWA) 技術
- 本地緩存歌曲和資源
- 離線處理和評分
- 連接恢復後自動同步

**使用場景**:
- 在無網絡環境中練習
- 減少數據使用
- 提高應用可靠性

## 功能路線圖

### 近期計劃 (6個月內)

- **多語言歌詞支持**: 擴展對更多語言的歌詞識別支持
- **社交分享功能**: 允許分享練習成績和錄音
- **自定義練習模式**: 允許用戶創建自定義練習計劃

### 中期計劃 (12個月內)

- **用戶帳戶系統**: 添加用戶註冊和登錄功能
- **雲端同步**: 跨設備同步練習數據和偏好設定
- **AI 教練進階版**: 更智能的個性化練習建議

### 長期計劃 (24個月內)

- **實時協作**: 支援多人同時練習和比賽
- **AR 視覺輔助**: 使用 AR 技術提供更直觀的視覺反饋
- **聲樂教學課程**: 整合結構化的聲樂教學內容

## 結論

Pitch Trainer 提供了全面的歌唱練習和音準訓練功能，結合了先進的 AI 技術和用戶友好的界面設計。無論是初學者還是有經驗的歌手，都能從這個應用中獲益，提高自己的歌唱技巧和音樂表現力。


